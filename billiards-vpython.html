<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3KXCGYN35T"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-3KXCGYN35T');
</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa1c38186-5e33-436b-be79-90022a4085d3%2F-_(2).png?table=collection&amp;id=e12a1192-37fa-42fd-bf61-565dadbc8834">

<style>
  :root {
    font-size: 20px;
  }
</style>

  <title>撞球遊戲 billiards&nbsp;|&nbsp;Alan&#39;s blog</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="撞球遊戲 billiards">
  
    <meta name="description" content="撞球小遊戲 written in vpython">
    <meta property="og:description" content="撞球小遊戲 written in vpython">
  
  
    <meta property="og:image" content="https://img.icons8.com/ios/100/000000/billiards.png">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa1c38186-5e33-436b-be79-90022a4085d3%2F-_(2).png?table=collection&amp;id=e12a1192-37fa-42fd-bf61-565dadbc8834"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="certification.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://img.icons8.com/dotty/80/000000/paper.png"></span>&nbsp;
          
          <span>檢定成績</span>
        </div>
      </a>
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="weather_dashboard.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://img.icons8.com/windows/96/000000/weather-station-wind.png"></span>&nbsp;
          
          <span>氣象站</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="C++_notes.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://img.icons8.com/ios/100/000000/c-plus-plus-logo.png"></span>&nbsp;
          
          <span>C++筆記</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://img.icons8.com/ios/250/000000/user-male.png"></span>&nbsp;
          
          <span>關於</span>
        </div>
      </a>
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="https://img.icons8.com/ios/100/000000/billiards.png"></span>
      </div>
    
    <h1 class="Header__Title">撞球遊戲 billiards</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Sat, Sep 25, 2021</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--green">
            <a href="tag/python.html">python</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/c61c14b31a434f018f2bc1f14cfcc133" class="PageRoot"><h2 id="https://www.notion.so/a2fc13a463864a6b9ac11deba0bab1a6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/a2fc13a463864a6b9ac11deba0bab1a6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">線上執行</span></span></h2><div id="https://www.notion.so/7e1a34c0abca43f695cc70d0c72becc6" class="Bookmark"><a href="https://www.glowscript.org/#/user/alanliang314159/folder/MyPrograms/program/Billiards"><h5 class="Bookmark__Title">GlowScript IDE</h5><p class="Bookmark__Desc">GlowScript is an easy-to-use, powerful environment for creating 3D animations and publishing them on the web. Here at glowscript.org, you can write and run GlowScript programs right in your browser, store them in the cloud for free, and easily share them with others. The Help provides full documentation.</p><p class="Bookmark__Link">https://www.glowscript.org/#/user/alanliang314159/folder/MyPrograms/program/Billiards</p></a></div><h2 id="https://www.notion.so/362cdc2c26074cab91ffee744576dd5b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/362cdc2c26074cab91ffee744576dd5b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">程式碼</span></span></h2><pre id="https://www.notion.so/9dd06f5153704cb488b3c27fb395d082" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span>GlowScript <span class="token number">3.1</span> VPython

<span class="token comment"># 1 參數設定, 設定變數及初始值</span>
size <span class="token operator">=</span> <span class="token number">1.5</span> <span class="token comment"># 小球半徑</span>
g <span class="token operator">=</span> <span class="token number">9.8</span> <span class="token comment"># 地球重力加速度 9.8 m/s^2</span>
t <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment"># 計算時間用參數</span>
dt <span class="token operator">=</span> <span class="token number">0.01</span> <span class="token comment"># 時間間隔</span>
floorfric <span class="token operator">=</span> <span class="token number">0.01</span>
wallbounce <span class="token operator">=</span> <span class="token number">0.01</span>
batangle<span class="token operator">=</span>pi<span class="token operator">/</span><span class="token number">2</span>
batlength <span class="token operator">=</span> <span class="token number">30</span>
batforce <span class="token operator">=</span> <span class="token number">5</span>


<span class="token comment">#設定球，及球初速、加速</span>
ballinhole<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
ballA<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>   <span class="token comment"># 利用列表儲存球</span>
N<span class="token operator">=</span><span class="token number">16</span> 
balld<span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>size<span class="token operator">*</span>sin<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span>
ballpos<span class="token operator">=</span><span class="token punctuation">[</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        vector<span class="token punctuation">(</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token operator">-</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        vector<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        vector<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">*</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token operator">-</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token operator">*</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        vector<span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">*</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span><span class="token operator">*</span>size<span class="token punctuation">,</span><span class="token number">40</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">*</span>balld<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">for</span>  i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># 所有球之位置</span>
    ball <span class="token operator">=</span> sphere<span class="token punctuation">(</span>pos <span class="token operator">=</span> ballpos<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> radius <span class="token operator">=</span> size<span class="token punctuation">,</span> color <span class="token operator">=</span> color<span class="token punctuation">.</span>red <span class="token punctuation">,</span> make_trail<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> 
    ballA<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ball<span class="token punctuation">)</span>
    ballA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    ballinhole<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>color<span class="token operator">=</span>color<span class="token punctuation">.</span>white


holeA<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment">#球洞</span>
holepos<span class="token operator">=</span><span class="token punctuation">[</span>vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         vector<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>vector<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>
  hole <span class="token operator">=</span>sphere<span class="token punctuation">(</span>pos <span class="token operator">=</span> holepos<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">,</span>radius <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">*</span>size<span class="token punctuation">,</span> color <span class="token operator">=</span> color<span class="token punctuation">.</span>black<span class="token punctuation">)</span>
  holeA<span class="token punctuation">.</span>append<span class="token punctuation">(</span>hole<span class="token punctuation">)</span>


<span class="token comment">#設定球桌</span>
table <span class="token operator">=</span> box<span class="token punctuation">(</span>pos <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">160</span><span class="token operator">+</span>balld<span class="token punctuation">,</span>width <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> color <span class="token operator">=</span> color<span class="token punctuation">.</span>blue<span class="token punctuation">)</span><span class="token comment">#桌</span>
quan <span class="token operator">=</span> box<span class="token punctuation">(</span>pos <span class="token operator">=</span> vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">,</span> height <span class="token operator">=</span> <span class="token number">170</span><span class="token punctuation">,</span> width<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> color <span class="token operator">=</span> color<span class="token punctuation">.</span>cyan<span class="token punctuation">)</span><span class="token comment">#框</span>
bat <span class="token operator">=</span> arrow<span class="token punctuation">(</span>pos<span class="token operator">=</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>batlength<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> shaftwidth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">#球桿</span>


<span class="token comment">#箭頭(球桿)</span>
bat<span class="token punctuation">.</span>pos<span class="token operator">=</span>vector<span class="token punctuation">(</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x<span class="token operator">-</span><span class="token punctuation">(</span>batlength<span class="token operator">+</span>batforce<span class="token punctuation">)</span><span class="token operator">*</span>cos<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y<span class="token operator">-</span><span class="token punctuation">(</span>batlength<span class="token operator">+</span>batforce<span class="token punctuation">)</span><span class="token operator">*</span>sin<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
bat<span class="token punctuation">.</span>axis<span class="token operator">=</span>vector<span class="token punctuation">(</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x<span class="token operator">-</span>bat<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x<span class="token punctuation">,</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y<span class="token operator">-</span>bat<span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token comment">#3 小球運動部分,小球撞牆時反彈=> 無窮迴圈</span>
<span class="token keyword">while</span> <span class="token boolean">True</span> <span class="token punctuation">:</span> 
  stop <span class="token operator">=</span> <span class="token number">0</span><span class="token comment">#所有球靜止</span>
  bat<span class="token punctuation">.</span>opacity<span class="token operator">=</span><span class="token number">0</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>stop<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    stop<span class="token operator">=</span><span class="token number">1</span>
    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#球速度、位置的變化</span>
        ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token operator">=</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>floorfric<span class="token punctuation">)</span> <span class="token comment"># v=v0+a*t 物理錯誤</span>
        ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token operator">=</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token operator">+</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token operator">*</span>dt <span class="token comment"># S=s0+v*t</span>
        rate<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">#動畫更新時間間隔 0.2秒</span>

    <span class="token comment">#撞地板的反彈</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> <span class="token operator">-</span><span class="token number">80</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span>
          ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">80</span>
          ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>y<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>wallbounce<span class="token punctuation">)</span>

    <span class="token comment">#撞天花板的反彈</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">>=</span> <span class="token number">80</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span>
          ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">80</span>
          ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>y<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>wallbounce<span class="token punctuation">)</span>

    <span class="token comment">#撞右牆的反彈</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">>=</span> <span class="token number">40</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span>
          ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">40</span>
          ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>x<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>wallbounce<span class="token punctuation">)</span>
    
    <span class="token comment">#撞左牆的反彈</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">&lt;=</span> <span class="token operator">-</span><span class="token number">40</span> <span class="token punctuation">)</span> <span class="token punctuation">:</span>
          ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">40</span>  
          ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>x<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span>wallbounce<span class="token punctuation">)</span>
          
    <span class="token comment">#進洞</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            d<span class="token operator">=</span>mag<span class="token punctuation">(</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token operator">-</span>holeA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token operator">&lt;=</span><span class="token number">4</span><span class="token operator">*</span>size<span class="token punctuation">)</span><span class="token punctuation">:</span>
              ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>opacity<span class="token operator">=</span><span class="token number">0</span>
              ballinhole<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span>
              ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>z<span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span>
              ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token operator">=</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
              
    <span class="token comment">#二維彈性碰撞</span>
        <span class="token keyword">for</span> h <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>N<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            bd <span class="token operator">=</span> ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token operator">-</span>ballA<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span>pos
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mag<span class="token punctuation">(</span>bd<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">2</span><span class="token operator">*</span>size<span class="token punctuation">)</span><span class="token punctuation">:</span>
              projK<span class="token operator">=</span>proj<span class="token punctuation">(</span> ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v <span class="token punctuation">,</span>bd <span class="token punctuation">)</span><span class="token comment">#向兩球連線向量投影速度向量</span>
              projH<span class="token operator">=</span>proj<span class="token punctuation">(</span> ballA<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span>v <span class="token punctuation">,</span>bd <span class="token punctuation">)</span>
              ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token operator">+=</span>projH<span class="token operator">-</span>projK
              ballA<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token operator">+=</span>projK<span class="token operator">-</span>projH
              ballA<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token operator">=</span>ballA<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span>pos <span class="token operator">-</span> bd<span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span> mag<span class="token punctuation">(</span>bd<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">#是否停止</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">.</span>mag<span class="token operator">>=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            stop<span class="token operator">=</span><span class="token number">0</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            ballA<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token operator">=</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token comment">#目前時間+時間間格&lt;== 設定新時間為下一個時間</span>
        t<span class="token operator">=</span>t<span class="token operator">+</span>dt
  <span class="token comment">#如果白球進洞跳回中間</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ballinhole<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>opacity<span class="token operator">=</span><span class="token number">100</span>
    ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token operator">=</span>vector<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    ballinhole<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span>
  <span class="token comment">#箭頭(球桿)</span>
  bat<span class="token punctuation">.</span>pos<span class="token operator">=</span>vector<span class="token punctuation">(</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x<span class="token operator">-</span><span class="token punctuation">(</span>batlength<span class="token operator">+</span>batforce<span class="token punctuation">)</span><span class="token operator">*</span>cos<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y<span class="token operator">-</span><span class="token punctuation">(</span>batlength<span class="token operator">+</span>batforce<span class="token punctuation">)</span><span class="token operator">*</span>sin<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
  bat<span class="token punctuation">.</span>axis<span class="token operator">=</span>vector<span class="token punctuation">(</span>batlength<span class="token operator">*</span>cos<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span>batlength<span class="token operator">*</span>sin<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
  batforce <span class="token operator">=</span> <span class="token number">5</span>
  batangle<span class="token operator">=</span>pi<span class="token operator">/</span><span class="token number">2</span> <span class="token comment">#單位 弳</span>
  <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    rate<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> 
    bat<span class="token punctuation">.</span>opacity<span class="token operator">=</span><span class="token number">100</span>
    k<span class="token operator">=</span>keysdown<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token string">'left'</span> <span class="token keyword">in</span> k<span class="token punctuation">:</span>
      batangle<span class="token operator">=</span>batangle<span class="token operator">-</span><span class="token number">0.01</span>
    <span class="token keyword">if</span> <span class="token string">'right'</span> <span class="token keyword">in</span> k<span class="token punctuation">:</span>
      batangle<span class="token operator">=</span>batangle<span class="token operator">+</span><span class="token number">0.01</span>
    <span class="token keyword">if</span> <span class="token string">'up'</span> <span class="token keyword">in</span> k<span class="token punctuation">:</span>
      batforce<span class="token operator">=</span>batforce<span class="token operator">+</span><span class="token number">1</span>
    <span class="token keyword">if</span> <span class="token string">'down'</span> <span class="token keyword">in</span> k<span class="token punctuation">:</span>
      batforce<span class="token operator">=</span>batforce<span class="token operator">-</span><span class="token number">1</span>
    <span class="token comment">#print(batangle,batforce, k) </span>
    <span class="token keyword">if</span> batforce<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">:</span>  <span class="token comment">#球棒最近距離</span>
        batforce<span class="token operator">=</span><span class="token number">5</span>
    <span class="token keyword">if</span> batforce<span class="token operator">></span><span class="token number">20</span><span class="token punctuation">:</span> <span class="token comment">#球棒最遠距離</span>
        batforce<span class="token operator">=</span><span class="token number">20</span>
    bat<span class="token punctuation">.</span>pos<span class="token operator">=</span>vector<span class="token punctuation">(</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x<span class="token operator">-</span><span class="token punctuation">(</span>batlength<span class="token operator">+</span>batforce<span class="token punctuation">)</span><span class="token operator">*</span>cos<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y<span class="token operator">-</span><span class="token punctuation">(</span>batlength<span class="token operator">+</span>batforce<span class="token punctuation">)</span><span class="token operator">*</span>sin<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    bat<span class="token punctuation">.</span>axis<span class="token operator">=</span>vector<span class="token punctuation">(</span>batlength<span class="token operator">*</span>cos<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span>batlength<span class="token operator">*</span>sin<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token string">' '</span> <span class="token keyword">in</span> k<span class="token punctuation">:</span>
      ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token operator">=</span>vector<span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">*</span>batforce<span class="token operator">*</span>cos<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token operator">*</span>batforce<span class="token operator">*</span>sin<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> q <span class="token keyword">in</span> <span class="token builtin">range</span> <span class="token punctuation">(</span>batforce<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
          rate<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
          bat<span class="token punctuation">.</span>pos<span class="token operator">=</span>vector<span class="token punctuation">(</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>x<span class="token operator">-</span><span class="token punctuation">(</span>batlength<span class="token operator">+</span>batforce<span class="token punctuation">)</span><span class="token operator">*</span>cos<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span>ballA<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">.</span>y<span class="token operator">-</span><span class="token punctuation">(</span>batlength<span class="token operator">+</span>batforce<span class="token punctuation">)</span><span class="token operator">*</span>sin<span class="token punctuation">(</span>batangle<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
          batforce<span class="token operator">-=</span><span class="token number">1</span>
      <span class="token keyword">break</span></span></span></span></code></pre></article>
  <footer class="Footer">
  <div>&copy; Alan&#39;s blog 2019-2021</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>